{"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/56973750.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-56973750"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "I think there is a bug in the urdf to sdf conversion. The `gazebo reference` for adding collisions need to come before the reference for setting `mu1` and `mu2`.  Lumping of links also caused some problems. The following patch adds the collision with the `collide_without_contact` tag. I've only checked it using `gz sdf` but not in gazebo though; see if this works:\n\n~~~\n--- servicebot_old.urdf\t2018-02-21 19:09:41.647193522 -0800\n+++ servicebot.urdf\t2018-02-21 19:08:23.987135994 -0800\n@@ -10,18 +10,26 @@\n         <mesh filename=\"package://servicebot_description/meshes/Torso.obj\" />\n       </geometry>\n     </visual>\n-    <collision>\n+    <collision name=\"collision0\">\n       <origin rpy=\"0 0 0\" xyz=\"0 0 0.03\"/>\n       <geometry>\n         <box size=\"0.32 0.3 0.32\"/>\n       </geometry>\n     </collision>\n-    <collision>\n+    <collision name=\"collision1\">\n       <origin rpy=\"0 0 0\" xyz=\"0 0 0.23\"/>\n       <geometry>\n         <cylinder radius=\"0.07\" length=\"0.10\"/>\n       </geometry>\n     </collision>\n+\n+    <collision>\n+      <origin rpy=\"0 0 0\" xyz=\"0 0 0.0\"/>\n+      <geometry>\n+        <cylinder radius=\"0.5\" length=\"1.0\"/>\n+      </geometry>\n+    </collision>\n+\n     <!-- inflations -->\n     <collision name=\"inflation_people\">\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\n@@ -878,6 +886,19 @@\n     <selfCollide>false</selfCollide>\n     <turnGravityOff>false</turnGravityOff>\n   </gazebo>\n+\n+  <gazebo reference=\"base_link\">\n+    <collision name=\"inflation\">\n+      <surface>\n+        <contact>\n+          <collide_without_contact>true</collide_without_contact>\n+        </contact>\n+      </surface>\n+    </collision>\n+  </gazebo>\n+\n+\n+\n   <gazebo reference=\"head_link\">\n     <mu1>0.5</mu1>\n     <mu2>0.5</mu2>\n~~~", "markup": "markdown", "html": "<p>I think there is a bug in the urdf to sdf conversion. The <code>gazebo reference</code> for adding collisions need to come before the reference for setting <code>mu1</code> and <code>mu2</code>.  Lumping of links also caused some problems. The following patch adds the collision with the <code>collide_without_contact</code> tag. I've only checked it using <code>gz sdf</code> but not in gazebo though; see if this works:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gd\">--- servicebot_old.urdf 2018-02-21 19:09:41.647193522 -0800</span>\n<span class=\"gi\">+++ servicebot.urdf 2018-02-21 19:08:23.987135994 -0800</span>\n<span class=\"gu\">@@ -10,18 +10,26 @@</span>\n         &lt;mesh filename=&quot;package://servicebot_description/meshes/Torso.obj&quot; /&gt;\n       &lt;/geometry&gt;\n     &lt;/visual&gt;\n<span class=\"gd\">-    &lt;collision&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;collision0&quot;&gt;</span>\n       &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.03&quot;/&gt;\n       &lt;geometry&gt;\n         &lt;box size=&quot;0.32 0.3 0.32&quot;/&gt;\n       &lt;/geometry&gt;\n     &lt;/collision&gt;\n<span class=\"gd\">-    &lt;collision&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;collision1&quot;&gt;</span>\n       &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.23&quot;/&gt;\n       &lt;geometry&gt;\n         &lt;cylinder radius=&quot;0.07&quot; length=&quot;0.10&quot;/&gt;\n       &lt;/geometry&gt;\n     &lt;/collision&gt;\n<span class=\"gi\">+</span>\n<span class=\"gi\">+    &lt;collision&gt;</span>\n<span class=\"gi\">+      &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.0&quot;/&gt;</span>\n<span class=\"gi\">+      &lt;geometry&gt;</span>\n<span class=\"gi\">+        &lt;cylinder radius=&quot;0.5&quot; length=&quot;1.0&quot;/&gt;</span>\n<span class=\"gi\">+      &lt;/geometry&gt;</span>\n<span class=\"gi\">+    &lt;/collision&gt;</span>\n<span class=\"gi\">+</span>\n     &lt;!-- inflations --&gt;\n     &lt;collision name=&quot;inflation_people&quot;&gt;\n       &lt;origin rpy=&quot;0 0 -0.08&quot; xyz=&quot;0 0 0&quot;/&gt;\n<span class=\"gu\">@@ -878,6 +886,19 @@</span>\n     &lt;selfCollide&gt;false&lt;/selfCollide&gt;\n     &lt;turnGravityOff&gt;false&lt;/turnGravityOff&gt;\n   &lt;/gazebo&gt;\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  &lt;gazebo reference=&quot;base_link&quot;&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;inflation&quot;&gt;</span>\n<span class=\"gi\">+      &lt;surface&gt;</span>\n<span class=\"gi\">+        &lt;contact&gt;</span>\n<span class=\"gi\">+          &lt;collide_without_contact&gt;true&lt;/collide_without_contact&gt;</span>\n<span class=\"gi\">+        &lt;/contact&gt;</span>\n<span class=\"gi\">+      &lt;/surface&gt;</span>\n<span class=\"gi\">+    &lt;/collision&gt;</span>\n<span class=\"gi\">+  &lt;/gazebo&gt;</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+</span>\n   &lt;gazebo reference=&quot;head_link&quot;&gt;\n     &lt;mu1&gt;0.5&lt;/mu1&gt;\n     &lt;mu2&gt;0.5&lt;/mu2&gt;\n</pre></div>", "type": "rendered"}, "created_on": "2018-02-22T03:16:15.301142+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-22T03:16:15.306782+00:00", "type": "pullrequest_comment", "id": 56973750}