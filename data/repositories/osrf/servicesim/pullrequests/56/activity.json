{"pagelen": 50, "values": [{"update": {"description": "This adds a penalty for when the robot gets too close to a human and/or an object.\r\n\r\nThere are two cylinders around the robot of different radii, one checks approximations to humans, the other checks approximation to objects:\r\n\r\n![radii.png](https://bitbucket.org/repo/gkR8znK/images/2553629878-radii.png)\r\n\r\nThis results in no penalties, because the larger cylinder checks against humans:\r\n\r\n![col3.png](https://bitbucket.org/repo/gkR8znK/images/1427296655-col3.png)\r\n\r\nThis results in human approximation penalties:\r\n\r\n![col4.png](https://bitbucket.org/repo/gkR8znK/images/2549838075-col4.png)\r\n\r\nThis results in object approximation penalties:\r\n\r\n![col5.png](https://bitbucket.org/repo/gkR8znK/images/103347638-col5.png)\r\n\r\n\r\n## Known issue\r\n\r\nRight now, when the robot is close to the world origin, it thinks it is colliding with the guest, who is far far away in the private cafe:\r\n\r\n![originbug.png](https://bitbucket.org/repo/gkR8znK/images/913326091-originbug.png)\r\n\r\nI suspect this is a physics bug because the guest has never been animated, I'll leave it as an open issue for now.\r\n\r\n## Inflation plugin\r\n\r\nAll the new plugin does is setting [collide_without_contact](http://sdformat.org/spec?ver=1.6&elem=collision#contact_collide_without_contact) to true for the \"inflation\" collisions. I tried a few things to set it directly on URDF but they didn't work.\r\n\r\nThese collide *with* contact:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:20:02 2018 -0800\r\n@@ -28,12 +28,14 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <collideWithoutContact>true</collideWithoutContact>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:27:02 2018 -0800\r\n@@ -28,6 +28,11 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\nThis crashes the URDF parser:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:35:09 2018 -0800\r\n@@ -865,13 +852,21 @@\r\n     </sensor>\r\n   </gazebo>\r\n\r\n+  <gazebo reference=\"base_link\">\r\n+    <collision name=\"inflation\">\r\n+      <geometry>\r\n+        <cylinder>\r\n+          <radius>0.5</radius>\r\n+          <length>1.0</length>\r\n+        </cylinder>\r\n+      </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n+    </collision>\r\n   </gazebo>\r\n-\r\n   <gazebo reference=\"base_link\">\r\n     <mu1>0.5</mu1>\r\n\r\n~~~\r\n\r\nwith this backtrace:\r\n\r\n~~~\r\n#0  0x00007ffff457f6ed in InsertSDFExtensionCollision (_elem=0x7ffec8a2b5a0, _linkName=\"base_link\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:1904\r\n#1  0x00007ffff459bca0 in CreateCollision (_elem=0x7ffec89d2f40, _link=..., _collision=..., _oldLinkName=\"base_link_collision\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3408\r\n#2  0x00007ffff4594b7d in CreateCollisions (_elem=0x7ffec89d2f40, _link=...) at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3038\r\n#3  0x00007ffff4593d89 in CreateLink (_root=0x7ffec89d56d0, _link=..., _currentTransform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2908\r\n#4  0x00007ffff459287c in CreateSDF (_root=0x7ffec89d56d0, _link=..., _transform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2842\r\n#5  0x00007ffff459da2e in sdf::URDF2SDF::InitModelString (this=0x7ffedb7fc24f, \r\n    _urdfStr=\"<robot name=\\\"servicebot\\\"><!-- Note: this doesnt follow REP 120 as this robot, while having a humanoid shape, will behave like a mobile base --><!-- setting the base_link as the center of mass of the t\"..., _enforceLimits=true)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3523\r\n~~~", "title": "Approximation penalty", "destination": {"commit": {"hash": "58b8e7a5918b", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/58b8e7a5918b.json"}, "html": {"href": "#!/osrf/servicesim/commits/58b8e7a5918b"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9890bbe1b9e3", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/9890bbe1b9e3.json"}, "html": {"href": "#!/osrf/servicesim/commits/9890bbe1b9e3"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "approximation"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-02-22T22:59:28.390346+00:00"}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57093012.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57093012"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "CI is :blue_circle: , merging\n\nhttps://build.osrfoundation.org/view/proj_servicesim/job/servicesim-ci-pr-any-xenial-amd64/53/", "markup": "markdown", "html": "<p>CI is <img class=\"emoji\" src=\"data/pf-emoji-service--cdn.us-east-1.prod.public.atl-paas.net/standard/551c9814-1d37-4573-819d-afab3afeaf32/48x48/1f535.png\" alt=\"\ud83d\udd35\" title=\":blue_circle:\" data-emoji-short-name=\":blue_circle:\" /> , merging</p>\n<p><a href=\"https://build.osrfoundation.org/view/proj_servicesim/job/servicesim-ci-pr-any-xenial-amd64/53/\" rel=\"nofollow\" class=\"ap-connect-link\">https://build.osrfoundation.org/view/proj_servicesim/job/servicesim-ci-pr-any-xenial-amd64/53/</a></p>", "type": "rendered"}, "created_on": "2018-02-22T22:59:18.968003+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T22:59:18.971641+00:00", "type": "pullrequest_comment", "id": 57093012}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57092079.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57092079"}}, "parent": {"id": 57082552, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57082552.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57082552"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Reduced in 9890bbe, I also commented out the spammy console messages as we talked about\n\n![doorcol.png](data/bitbucket.org/repo/gkR8znK/images/3063055619-doorcol.png)", "markup": "markdown", "html": "<p>Reduced in <a href=\"#!/osrf/servicesim/commits/9890bbe\" rel=\"nofollow\" class=\"ap-connect-link\">9890bbe</a>, I also commented out the spammy console messages as we talked about</p>\n<p><img alt=\"doorcol.png\" src=\"data/bitbucket.org/repo/gkR8znK/images/3063055619-doorcol.png\" /></p>", "type": "rendered"}, "created_on": "2018-02-22T22:44:07.095864+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T22:44:07.099283+00:00", "type": "pullrequest_comment", "id": 57092079}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57091992.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57091992"}}, "parent": {"id": 57087706, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57087706.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57087706"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Hooray! Got it to work by creating a link for each cylinder and using `preserveFixedJoint`! Plugin is gone in 9890bbe ! Thanks for all the help!", "markup": "markdown", "html": "<p>Hooray! Got it to work by creating a link for each cylinder and using <code>preserveFixedJoint</code>! Plugin is gone in <a href=\"#!/osrf/servicesim/commits/9890bbe\" rel=\"nofollow\" class=\"ap-connect-link\">9890bbe</a> ! Thanks for all the help!</p>", "type": "rendered"}, "created_on": "2018-02-22T22:42:58.515566+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T22:42:58.519761+00:00", "type": "pullrequest_comment", "id": 57091992}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"update": {"description": "This adds a penalty for when the robot gets too close to a human and/or an object.\r\n\r\nThere are two cylinders around the robot of different radii, one checks approximations to humans, the other checks approximation to objects:\r\n\r\n![radii.png](https://bitbucket.org/repo/gkR8znK/images/2553629878-radii.png)\r\n\r\nThis results in no penalties, because the larger cylinder checks against humans:\r\n\r\n![col3.png](https://bitbucket.org/repo/gkR8znK/images/1427296655-col3.png)\r\n\r\nThis results in human approximation penalties:\r\n\r\n![col4.png](https://bitbucket.org/repo/gkR8znK/images/2549838075-col4.png)\r\n\r\nThis results in object approximation penalties:\r\n\r\n![col5.png](https://bitbucket.org/repo/gkR8znK/images/103347638-col5.png)\r\n\r\n\r\n## Known issue\r\n\r\nRight now, when the robot is close to the world origin, it thinks it is colliding with the guest, who is far far away in the private cafe:\r\n\r\n![originbug.png](https://bitbucket.org/repo/gkR8znK/images/913326091-originbug.png)\r\n\r\nI suspect this is a physics bug because the guest has never been animated, I'll leave it as an open issue for now.\r\n\r\n## Inflation plugin\r\n\r\nAll the new plugin does is setting [collide_without_contact](http://sdformat.org/spec?ver=1.6&elem=collision#contact_collide_without_contact) to true for the \"inflation\" collisions. I tried a few things to set it directly on URDF but they didn't work.\r\n\r\nThese collide *with* contact:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:20:02 2018 -0800\r\n@@ -28,12 +28,14 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <collideWithoutContact>true</collideWithoutContact>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:27:02 2018 -0800\r\n@@ -28,6 +28,11 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\nThis crashes the URDF parser:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:35:09 2018 -0800\r\n@@ -865,13 +852,21 @@\r\n     </sensor>\r\n   </gazebo>\r\n\r\n+  <gazebo reference=\"base_link\">\r\n+    <collision name=\"inflation\">\r\n+      <geometry>\r\n+        <cylinder>\r\n+          <radius>0.5</radius>\r\n+          <length>1.0</length>\r\n+        </cylinder>\r\n+      </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n+    </collision>\r\n   </gazebo>\r\n-\r\n   <gazebo reference=\"base_link\">\r\n     <mu1>0.5</mu1>\r\n\r\n~~~\r\n\r\nwith this backtrace:\r\n\r\n~~~\r\n#0  0x00007ffff457f6ed in InsertSDFExtensionCollision (_elem=0x7ffec8a2b5a0, _linkName=\"base_link\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:1904\r\n#1  0x00007ffff459bca0 in CreateCollision (_elem=0x7ffec89d2f40, _link=..., _collision=..., _oldLinkName=\"base_link_collision\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3408\r\n#2  0x00007ffff4594b7d in CreateCollisions (_elem=0x7ffec89d2f40, _link=...) at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3038\r\n#3  0x00007ffff4593d89 in CreateLink (_root=0x7ffec89d56d0, _link=..., _currentTransform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2908\r\n#4  0x00007ffff459287c in CreateSDF (_root=0x7ffec89d56d0, _link=..., _transform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2842\r\n#5  0x00007ffff459da2e in sdf::URDF2SDF::InitModelString (this=0x7ffedb7fc24f, \r\n    _urdfStr=\"<robot name=\\\"servicebot\\\"><!-- Note: this doesnt follow REP 120 as this robot, while having a humanoid shape, will behave like a mobile base --><!-- setting the base_link as the center of mass of the t\"..., _enforceLimits=true)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3523\r\n~~~", "title": "Approximation penalty", "destination": {"commit": {"hash": "5dba22e8da6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/5dba22e8da6c.json"}, "html": {"href": "#!/osrf/servicesim/commits/5dba22e8da6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9890bbe1b9e3", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/9890bbe1b9e3.json"}, "html": {"href": "#!/osrf/servicesim/commits/9890bbe1b9e3"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "approximation"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-02-22T22:41:43.621342+00:00"}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57087706.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57087706"}}, "parent": {"id": 57086364, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57086364.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57086364"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Ohh I haven't tried that, I'll give it a try. So far, I couldn't find a way to add the tag and also choose the collision's name, which is needed in this use case. ", "markup": "markdown", "html": "<p>Ohh I haven't tried that, I'll give it a try. So far, I couldn't find a way to add the tag and also choose the collision's name, which is needed in this use case. </p>", "type": "rendered"}, "created_on": "2018-02-22T21:45:59.931724+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T21:45:59.935311+00:00", "type": "pullrequest_comment", "id": 57087706}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57086364.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57086364"}}, "parent": {"id": 57054728, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57054728.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57054728"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "ya we just have to play by the rules of the urdf parser but it's hard to understand what it's actually doing. Another thing to try would be to prevent lumping of links caused by fixed joints using the [preserveFixedJoint tag](https://bitbucket.org/osrf/sdformat/pull-requests/352). e.g. `<gazebo reference='your_joint_name'><preserveFixedJoint>true</preserveFixedJoint></gazebo>`\n", "markup": "markdown", "html": "<p>ya we just have to play by the rules of the urdf parser but it's hard to understand what it's actually doing. Another thing to try would be to prevent lumping of links caused by fixed joints using the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/sdformat/pull-requests/352\" rel=\"nofollow\">preserveFixedJoint tag</a>. e.g. <code>&lt;gazebo reference='your_joint_name'&gt;&lt;preserveFixedJoint&gt;true&lt;/preserveFixedJoint&gt;&lt;/gazebo&gt;</code></p>", "type": "rendered"}, "created_on": "2018-02-22T21:32:51.637280+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-22T21:32:51.641555+00:00", "type": "pullrequest_comment", "id": 57086364}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"approval": {"date": "2018-02-22T20:47:09.271652+00:00", "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "user": {"display_name": "Rohitsalem", "uuid": "{9bb649c1-db0a-48f0-9d32-bd264478ca20}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D"}, "html": {"href": "https://bitbucket.org/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e0f5cae362a1e9bdd2d789328b6090a0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsR-3.png"}}, "nickname": "rohitsalem", "type": "user", "account_id": "557058:d6a9f34e-2c17-4df6-bb9f-2303baa1d149"}}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57082552.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57082552"}}, "parent": {"id": 57077102, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57077102.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57077102"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Other than that everything else looks good! ", "markup": "markdown", "html": "<p>Other than that everything else looks good! </p>", "type": "rendered"}, "created_on": "2018-02-22T20:47:02.210518+00:00", "user": {"display_name": "Rohitsalem", "uuid": "{9bb649c1-db0a-48f0-9d32-bd264478ca20}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D"}, "html": {"href": "https://bitbucket.org/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e0f5cae362a1e9bdd2d789328b6090a0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsR-3.png"}}, "nickname": "rohitsalem", "type": "user", "account_id": "557058:d6a9f34e-2c17-4df6-bb9f-2303baa1d149"}, "updated_on": "2018-02-22T20:47:02.213498+00:00", "type": "pullrequest_comment", "id": 57082552}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57054728.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57054728"}}, "parent": {"id": 56973750, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/56973750.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-56973750"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Thanks for looking into this! The `gz sdf` tip is great, much quicker to check!\n\nI'm trying a few combinations and as far as I can tell, the `<collision name=\"inflation\">` doesn't seem to do anything; the tag is being added to the first anonymous collision it finds and the name is not added to the collision. I'll try a few more things here, this is already great help, thanks!", "markup": "markdown", "html": "<p>Thanks for looking into this! The <code>gz sdf</code> tip is great, much quicker to check!</p>\n<p>I'm trying a few combinations and as far as I can tell, the <code>&lt;collision name=\"inflation\"&gt;</code> doesn't seem to do anything; the tag is being added to the first anonymous collision it finds and the name is not added to the collision. I'll try a few more things here, this is already great help, thanks!</p>", "type": "rendered"}, "created_on": "2018-02-22T16:25:19.464601+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T19:43:12.467945+00:00", "type": "pullrequest_comment", "id": 57054728}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57077102.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57077102"}}, "parent": {"id": 57076967, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57076967.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57076967"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "Nice catch! I'll reduce it", "markup": "markdown", "html": "<p>Nice catch! I'll reduce it</p>", "type": "rendered"}, "created_on": "2018-02-22T19:42:21.047446+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2018-02-22T19:42:21.052337+00:00", "type": "pullrequest_comment", "id": 57077102}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/57076967.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-57076967"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "@chapulina I think the collision radius for objects has to be adjusted?  The robot cannot get through the door without losing score.\n\n![Screenshot 2018-02-22 11:36:00.png](data/bitbucket.org/repo/gkR8znK/images/80240227-Screenshot_2018-02-22_113600.png)", "markup": "markdown", "html": "<p>@chapulina I think the collision radius for objects has to be adjusted?  The robot cannot get through the door without losing score.</p>\n<p><img alt=\"Screenshot 2018-02-22 11:36:00.png\" src=\"data/bitbucket.org/repo/gkR8znK/images/80240227-Screenshot_2018-02-22_113600.png\" /></p>", "type": "rendered"}, "created_on": "2018-02-22T19:41:00.353658+00:00", "user": {"display_name": "Rohitsalem", "uuid": "{9bb649c1-db0a-48f0-9d32-bd264478ca20}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D"}, "html": {"href": "https://bitbucket.org/%7B9bb649c1-db0a-48f0-9d32-bd264478ca20%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e0f5cae362a1e9bdd2d789328b6090a0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsR-3.png"}}, "nickname": "rohitsalem", "type": "user", "account_id": "557058:d6a9f34e-2c17-4df6-bb9f-2303baa1d149"}, "updated_on": "2018-02-22T19:41:00.363505+00:00", "type": "pullrequest_comment", "id": 57076967}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56/comments/56973750.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56/_/diff#comment-56973750"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}, "content": {"raw": "I think there is a bug in the urdf to sdf conversion. The `gazebo reference` for adding collisions need to come before the reference for setting `mu1` and `mu2`.  Lumping of links also caused some problems. The following patch adds the collision with the `collide_without_contact` tag. I've only checked it using `gz sdf` but not in gazebo though; see if this works:\n\n~~~\n--- servicebot_old.urdf\t2018-02-21 19:09:41.647193522 -0800\n+++ servicebot.urdf\t2018-02-21 19:08:23.987135994 -0800\n@@ -10,18 +10,26 @@\n         <mesh filename=\"package://servicebot_description/meshes/Torso.obj\" />\n       </geometry>\n     </visual>\n-    <collision>\n+    <collision name=\"collision0\">\n       <origin rpy=\"0 0 0\" xyz=\"0 0 0.03\"/>\n       <geometry>\n         <box size=\"0.32 0.3 0.32\"/>\n       </geometry>\n     </collision>\n-    <collision>\n+    <collision name=\"collision1\">\n       <origin rpy=\"0 0 0\" xyz=\"0 0 0.23\"/>\n       <geometry>\n         <cylinder radius=\"0.07\" length=\"0.10\"/>\n       </geometry>\n     </collision>\n+\n+    <collision>\n+      <origin rpy=\"0 0 0\" xyz=\"0 0 0.0\"/>\n+      <geometry>\n+        <cylinder radius=\"0.5\" length=\"1.0\"/>\n+      </geometry>\n+    </collision>\n+\n     <!-- inflations -->\n     <collision name=\"inflation_people\">\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\n@@ -878,6 +886,19 @@\n     <selfCollide>false</selfCollide>\n     <turnGravityOff>false</turnGravityOff>\n   </gazebo>\n+\n+  <gazebo reference=\"base_link\">\n+    <collision name=\"inflation\">\n+      <surface>\n+        <contact>\n+          <collide_without_contact>true</collide_without_contact>\n+        </contact>\n+      </surface>\n+    </collision>\n+  </gazebo>\n+\n+\n+\n   <gazebo reference=\"head_link\">\n     <mu1>0.5</mu1>\n     <mu2>0.5</mu2>\n~~~", "markup": "markdown", "html": "<p>I think there is a bug in the urdf to sdf conversion. The <code>gazebo reference</code> for adding collisions need to come before the reference for setting <code>mu1</code> and <code>mu2</code>.  Lumping of links also caused some problems. The following patch adds the collision with the <code>collide_without_contact</code> tag. I've only checked it using <code>gz sdf</code> but not in gazebo though; see if this works:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gd\">--- servicebot_old.urdf 2018-02-21 19:09:41.647193522 -0800</span>\n<span class=\"gi\">+++ servicebot.urdf 2018-02-21 19:08:23.987135994 -0800</span>\n<span class=\"gu\">@@ -10,18 +10,26 @@</span>\n         &lt;mesh filename=&quot;package://servicebot_description/meshes/Torso.obj&quot; /&gt;\n       &lt;/geometry&gt;\n     &lt;/visual&gt;\n<span class=\"gd\">-    &lt;collision&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;collision0&quot;&gt;</span>\n       &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.03&quot;/&gt;\n       &lt;geometry&gt;\n         &lt;box size=&quot;0.32 0.3 0.32&quot;/&gt;\n       &lt;/geometry&gt;\n     &lt;/collision&gt;\n<span class=\"gd\">-    &lt;collision&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;collision1&quot;&gt;</span>\n       &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.23&quot;/&gt;\n       &lt;geometry&gt;\n         &lt;cylinder radius=&quot;0.07&quot; length=&quot;0.10&quot;/&gt;\n       &lt;/geometry&gt;\n     &lt;/collision&gt;\n<span class=\"gi\">+</span>\n<span class=\"gi\">+    &lt;collision&gt;</span>\n<span class=\"gi\">+      &lt;origin rpy=&quot;0 0 0&quot; xyz=&quot;0 0 0.0&quot;/&gt;</span>\n<span class=\"gi\">+      &lt;geometry&gt;</span>\n<span class=\"gi\">+        &lt;cylinder radius=&quot;0.5&quot; length=&quot;1.0&quot;/&gt;</span>\n<span class=\"gi\">+      &lt;/geometry&gt;</span>\n<span class=\"gi\">+    &lt;/collision&gt;</span>\n<span class=\"gi\">+</span>\n     &lt;!-- inflations --&gt;\n     &lt;collision name=&quot;inflation_people&quot;&gt;\n       &lt;origin rpy=&quot;0 0 -0.08&quot; xyz=&quot;0 0 0&quot;/&gt;\n<span class=\"gu\">@@ -878,6 +886,19 @@</span>\n     &lt;selfCollide&gt;false&lt;/selfCollide&gt;\n     &lt;turnGravityOff&gt;false&lt;/turnGravityOff&gt;\n   &lt;/gazebo&gt;\n<span class=\"gi\">+</span>\n<span class=\"gi\">+  &lt;gazebo reference=&quot;base_link&quot;&gt;</span>\n<span class=\"gi\">+    &lt;collision name=&quot;inflation&quot;&gt;</span>\n<span class=\"gi\">+      &lt;surface&gt;</span>\n<span class=\"gi\">+        &lt;contact&gt;</span>\n<span class=\"gi\">+          &lt;collide_without_contact&gt;true&lt;/collide_without_contact&gt;</span>\n<span class=\"gi\">+        &lt;/contact&gt;</span>\n<span class=\"gi\">+      &lt;/surface&gt;</span>\n<span class=\"gi\">+    &lt;/collision&gt;</span>\n<span class=\"gi\">+  &lt;/gazebo&gt;</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+</span>\n<span class=\"gi\">+</span>\n   &lt;gazebo reference=&quot;head_link&quot;&gt;\n     &lt;mu1&gt;0.5&lt;/mu1&gt;\n     &lt;mu2&gt;0.5&lt;/mu2&gt;\n</pre></div>", "type": "rendered"}, "created_on": "2018-02-22T03:16:15.301142+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": "2018-02-22T03:16:15.306782+00:00", "type": "pullrequest_comment", "id": 56973750}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"update": {"description": "This adds a penalty for when the robot gets too close to a human and/or an object.\r\n\r\nThere are two cylinders around the robot of different radii, one checks approximations to humans, the other checks approximation to objects:\r\n\r\n![radii.png](https://bitbucket.org/repo/gkR8znK/images/2553629878-radii.png)\r\n\r\nThis results in no penalties, because the larger cylinder checks against humans:\r\n\r\n![col3.png](https://bitbucket.org/repo/gkR8znK/images/1427296655-col3.png)\r\n\r\nThis results in human approximation penalties:\r\n\r\n![col4.png](https://bitbucket.org/repo/gkR8znK/images/2549838075-col4.png)\r\n\r\nThis results in object approximation penalties:\r\n\r\n![col5.png](https://bitbucket.org/repo/gkR8znK/images/103347638-col5.png)\r\n\r\n\r\n## Known issue\r\n\r\nRight now, when the robot is close to the world origin, it thinks it is colliding with the guest, who is far far away in the private cafe:\r\n\r\n![originbug.png](https://bitbucket.org/repo/gkR8znK/images/913326091-originbug.png)\r\n\r\nI suspect this is a physics bug because the guest has never been animated, I'll leave it as an open issue for now.\r\n\r\n## Inflation plugin\r\n\r\nAll the new plugin does is setting [collide_without_contact](http://sdformat.org/spec?ver=1.6&elem=collision#contact_collide_without_contact) to true for the \"inflation\" collisions. I tried a few things to set it directly on URDF but they didn't work.\r\n\r\nThese collide *with* contact:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:20:02 2018 -0800\r\n@@ -28,12 +28,14 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <collideWithoutContact>true</collideWithoutContact>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:27:02 2018 -0800\r\n@@ -28,6 +28,11 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\nThis crashes the URDF parser:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:35:09 2018 -0800\r\n@@ -865,13 +852,21 @@\r\n     </sensor>\r\n   </gazebo>\r\n\r\n+  <gazebo reference=\"base_link\">\r\n+    <collision name=\"inflation\">\r\n+      <geometry>\r\n+        <cylinder>\r\n+          <radius>0.5</radius>\r\n+          <length>1.0</length>\r\n+        </cylinder>\r\n+      </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n+    </collision>\r\n   </gazebo>\r\n-\r\n   <gazebo reference=\"base_link\">\r\n     <mu1>0.5</mu1>\r\n\r\n~~~\r\n\r\nwith this backtrace:\r\n\r\n~~~\r\n#0  0x00007ffff457f6ed in InsertSDFExtensionCollision (_elem=0x7ffec8a2b5a0, _linkName=\"base_link\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:1904\r\n#1  0x00007ffff459bca0 in CreateCollision (_elem=0x7ffec89d2f40, _link=..., _collision=..., _oldLinkName=\"base_link_collision\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3408\r\n#2  0x00007ffff4594b7d in CreateCollisions (_elem=0x7ffec89d2f40, _link=...) at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3038\r\n#3  0x00007ffff4593d89 in CreateLink (_root=0x7ffec89d56d0, _link=..., _currentTransform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2908\r\n#4  0x00007ffff459287c in CreateSDF (_root=0x7ffec89d56d0, _link=..., _transform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2842\r\n#5  0x00007ffff459da2e in sdf::URDF2SDF::InitModelString (this=0x7ffedb7fc24f, \r\n    _urdfStr=\"<robot name=\\\"servicebot\\\"><!-- Note: this doesnt follow REP 120 as this robot, while having a humanoid shape, will behave like a mobile base --><!-- setting the base_link as the center of mass of the t\"..., _enforceLimits=true)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3523\r\n~~~", "title": "Approximation penalty", "destination": {"commit": {"hash": "5dba22e8da6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/5dba22e8da6c.json"}, "html": {"href": "#!/osrf/servicesim/commits/5dba22e8da6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "478352015077", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/478352015077.json"}, "html": {"href": "#!/osrf/servicesim/commits/478352015077"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "approximation"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-02-22T02:37:33.435076+00:00"}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}, {"update": {"description": "This adds a penalty for when the robot gets too close to a human and/or an object.\r\n\r\nThere are two cylinders around the robot of different radii, one checks approximations to humans, the other checks approximation to objects:\r\n\r\n![radii.png](https://bitbucket.org/repo/gkR8znK/images/2553629878-radii.png)\r\n\r\nThis results in no penalties, because the larger cylinder checks against humans:\r\n\r\n![col3.png](https://bitbucket.org/repo/gkR8znK/images/1427296655-col3.png)\r\n\r\nThis results in human approximation penalties:\r\n\r\n![col4.png](https://bitbucket.org/repo/gkR8znK/images/2549838075-col4.png)\r\n\r\nThis results in object approximation penalties:\r\n\r\n![col5.png](https://bitbucket.org/repo/gkR8znK/images/103347638-col5.png)\r\n\r\n\r\n## Known issue\r\n\r\nRight now, when the robot is close to the world origin, it thinks it is colliding with the guest, who is far far away in the private cafe:\r\n\r\n![originbug.png](https://bitbucket.org/repo/gkR8znK/images/913326091-originbug.png)\r\n\r\nI suspect this is a physics bug because the guest has never been animated, I'll leave it as an open issue for now.\r\n\r\n## Inflation plugin\r\n\r\nAll the new plugin does is setting [collide_without_contact](http://sdformat.org/spec?ver=1.6&elem=collision#contact_collide_without_contact) to true for the \"inflation\" collisions. I tried a few things to set it directly on URDF but they didn't work.\r\n\r\nThese collide *with* contact:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:20:02 2018 -0800\r\n@@ -28,12 +28,14 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <collideWithoutContact>true</collideWithoutContact>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:27:02 2018 -0800\r\n@@ -28,6 +28,11 @@\r\n       <geometry>\r\n         <cylinder radius=\"0.75\" length=\"1.07\"/>\r\n       </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n     </collision>\r\n     <collision name=\"inflation_objs\">\r\n       <origin rpy=\"0 0 -0.08\" xyz=\"0 0 0\"/>\r\n~~~\r\n\r\nThis crashes the URDF parser:\r\n\r\n~~~\r\ndiff -r 478352015077 servicebot_description/urdf/servicebot.urdf\r\n--- a/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:09:47 2018 -0800\r\n+++ b/servicebot_description/urdf/servicebot.urdf\tWed Feb 21 18:35:09 2018 -0800\r\n@@ -865,13 +852,21 @@\r\n     </sensor>\r\n   </gazebo>\r\n\r\n+  <gazebo reference=\"base_link\">\r\n+    <collision name=\"inflation\">\r\n+      <geometry>\r\n+        <cylinder>\r\n+          <radius>0.5</radius>\r\n+          <length>1.0</length>\r\n+        </cylinder>\r\n+      </geometry>\r\n+      <surface>\r\n+        <contact>\r\n+          <collide_without_contact>true</collide_without_contact>\r\n+        </contact>\r\n+      </surface>\r\n+    </collision>\r\n   </gazebo>\r\n-\r\n   <gazebo reference=\"base_link\">\r\n     <mu1>0.5</mu1>\r\n\r\n~~~\r\n\r\nwith this backtrace:\r\n\r\n~~~\r\n#0  0x00007ffff457f6ed in InsertSDFExtensionCollision (_elem=0x7ffec8a2b5a0, _linkName=\"base_link\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:1904\r\n#1  0x00007ffff459bca0 in CreateCollision (_elem=0x7ffec89d2f40, _link=..., _collision=..., _oldLinkName=\"base_link_collision\")\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3408\r\n#2  0x00007ffff4594b7d in CreateCollisions (_elem=0x7ffec89d2f40, _link=...) at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3038\r\n#3  0x00007ffff4593d89 in CreateLink (_root=0x7ffec89d56d0, _link=..., _currentTransform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2908\r\n#4  0x00007ffff459287c in CreateSDF (_root=0x7ffec89d56d0, _link=..., _transform=...)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:2842\r\n#5  0x00007ffff459da2e in sdf::URDF2SDF::InitModelString (this=0x7ffedb7fc24f, \r\n    _urdfStr=\"<robot name=\\\"servicebot\\\"><!-- Note: this doesnt follow REP 120 as this robot, while having a humanoid shape, will behave like a mobile base --><!-- setting the base_link as the center of mass of the t\"..., _enforceLimits=true)\r\n    at /media/louise/TERA/code/sdf5/src/parser_urdf.cc:3523\r\n~~~", "title": "Approximation penalty", "destination": {"commit": {"hash": "5dba22e8da6c", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/5dba22e8da6c.json"}, "html": {"href": "#!/osrf/servicesim/commits/5dba22e8da6c"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "478352015077", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/servicesim/commit/478352015077.json"}, "html": {"href": "#!/osrf/servicesim/commits/478352015077"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/servicesim.json"}, "html": {"href": "#!/osrf/servicesim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{3f537f5a-62ec-4117-968f-73e9064ad028}ts=c_plus_plus"}}, "type": "repository", "name": "servicesim", "full_name": "osrf/servicesim", "uuid": "{3f537f5a-62ec-4117-968f-73e9064ad028}"}, "branch": {"name": "approximation"}}, "state": "OPEN", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2018-02-22T02:37:33.404013+00:00"}, "pull_request": {"type": "pullrequest", "id": 56, "links": {"self": {"href": "data/repositories/osrf/servicesim/pullrequests/56.json"}, "html": {"href": "#!/osrf/servicesim/pull-requests/56"}}, "title": "Approximation penalty"}}]}