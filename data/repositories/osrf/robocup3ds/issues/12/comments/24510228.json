{"links": {"self": {"href": "data/repositories/osrf/robocup3ds/issues/12/comments/24510228.json"}, "html": {"href": "#!/osrf/robocup3ds/issues/12#comment-24510228"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/robocup3ds/issues/12.json"}}, "type": "issue", "id": 12, "repository": {"links": {"self": {"href": "data/repositories/osrf/robocup3ds.json"}, "html": {"href": "#!/osrf/robocup3ds"}, "avatar": {"href": "data/bytebucket.org/ravatar/{920a9983-6b31-4842-b414-a2a01bf8a4e6}ts=c_plus_plus"}}, "type": "repository", "name": "robocup3ds", "full_name": "osrf/robocup3ds", "uuid": "{920a9983-6b31-4842-b414-a2a01bf8a4e6}"}, "title": "Deadlock in RCPServer::Send()"}, "content": {"raw": "Hi Carlos,\nthis definitely looks like an error source. Especially since we turned off buffering in the TCP/IP stack and send the length information byte by byte.\n\nI tested your fix in pull request #42 and it solves this issue for our agent and the protocol-tester tool I provided.\nWe can connect, initialize, beam and send commands without crashing.\n\nBut, I also noticed that when I disconnect my agent, the server still crashes with the following output:\n\n```\nRCPServer::Send() Socket not found.\nterminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\n```\n\nShould I open another issue for that?\n\nThank you very much for your effort!", "markup": "markdown", "html": "<p>Hi Carlos,\nthis definitely looks like an error source. Especially since we turned off buffering in the TCP/IP stack and send the length information byte by byte.</p>\n<p>I tested your fix in <a href=\"#!/osrf/robocup3ds/pull-requests/42/fix-issue-12\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #42</a> and it solves this issue for our agent and the protocol-tester tool I provided.\nWe can connect, initialize, beam and send commands without crashing.</p>\n<p>But, I also noticed that when I disconnect my agent, the server still crashes with the following output:</p>\n<div class=\"codehilite\"><pre><span></span>RCPServer::Send() Socket not found.\nterminate called after throwing an instance of &#39;std::bad_alloc&#39;\n  what():  std::bad_alloc\n</pre></div>\n\n\n<p>Should I open another issue for that?</p>\n<p>Thank you very much for your effort!</p>", "type": "rendered"}, "created_on": "2016-01-06T10:33:48.700681+00:00", "user": {"display_name": "Stefan Glaser", "uuid": "{aebb30f2-1996-410c-80b1-ed53786c945b}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Baebb30f2-1996-410c-80b1-ed53786c945b%7D"}, "html": {"href": "https://bitbucket.org/%7Baebb30f2-1996-410c-80b1-ed53786c945b%7D/"}, "avatar": {"href": "https://bitbucket.org/account/umscht/avatar/"}}, "nickname": "umscht", "type": "user", "account_id": null}, "updated_on": null, "type": "issue_comment", "id": 24510228}