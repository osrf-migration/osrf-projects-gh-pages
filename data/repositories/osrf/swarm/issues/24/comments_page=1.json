{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24046419.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24046419"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "after further digging, this has to do with the gps sensor. The attached patch indicates the issue. Run this with final_01_10_low_10.world in tutorial_5. To see it with just 1 rotor, change master.erb to use 0 ground and 0 fixed_wing robots.", "markup": "markdown", "html": "<p>after further digging, this has to do with the gps sensor. The attached patch indicates the issue. Run this with final_01_10_low_10.world in tutorial_5. To see it with just 1 rotor, change master.erb to use 0 ground and 0 fixed_wing robots.</p>", "type": "rendered"}, "created_on": "2015-12-14T19:33:45.765048+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": "2015-12-14T19:41:14.859332+00:00", "type": "issue_comment", "id": 24046419}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24046458.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24046458"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-12-14T19:35:23.901353+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": null, "type": "issue_comment", "id": 24046458}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24078913.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24078913"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "I created a gui overlay in complete_10.world that shows another view on the issue. The attached will overlay a grid that should lie on the ground but is not. This can be recreated in tutorial_5. The below_terrain/above_terrain.png files are for complete_10 and the camp_roberts.png is for final_01_10_low_10.world. The latter appears to be correct.", "markup": "markdown", "html": "<p>I created a gui overlay in complete_10.world that shows another view on the issue. The attached will overlay a grid that should lie on the ground but is not. This can be recreated in tutorial_5. The below_terrain/above_terrain.png files are for complete_10 and the camp_roberts.png is for final_01_10_low_10.world. The latter appears to be correct.</p>", "type": "rendered"}, "created_on": "2015-12-15T21:49:25.602258+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": "2015-12-15T21:51:48.352311+00:00", "type": "issue_comment", "id": 24078913}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24078921.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24078921"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-12-15T21:49:46.388247+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": null, "type": "issue_comment", "id": 24078921}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24078928.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24078928"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-12-15T21:50:02.446088+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": null, "type": "issue_comment", "id": 24078928}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24078940.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24078940"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2015-12-15T21:50:41.968047+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": null, "type": "issue_comment", "id": 24078940}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24185261.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24185261"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "I think that the problem you are seeing is associated with the `<elevation>` tag, located under `<spherical_coordinates>`. The elevation is set to 208 meters, which means the GPS sensor will return a value that is 208m + `GPS_Sensor_Z_World_Location`.\n\nCan you try changing `$elevation` in `worlds/master.erb` to zero, and see if that fixes your problem?", "markup": "markdown", "html": "<p>I think that the problem you are seeing is associated with the <code>&lt;elevation&gt;</code> tag, located under <code>&lt;spherical_coordinates&gt;</code>. The elevation is set to 208 meters, which means the GPS sensor will return a value that is 208m + <code>GPS_Sensor_Z_World_Location</code>.</p>\n<p>Can you try changing <code>$elevation</code> in <code>worlds/master.erb</code> to zero, and see if that fixes your problem?</p>", "type": "rendered"}, "created_on": "2015-12-18T21:50:08.738351+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 24185261}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24492856.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24492856"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "This appears to fix the first issue (first comment with TeamController.cc.patch). The grid is still not following the ground plane unfortunately.", "markup": "markdown", "html": "<p>This appears to fix the first issue (first comment with TeamController.cc.patch). The grid is still not following the ground plane unfortunately.</p>", "type": "rendered"}, "created_on": "2016-01-05T17:23:23.691933+00:00", "user": {"display_name": "Eric Squires", "uuid": "{270d0b63-a1d7-403e-8182-194b6a4b9858}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D"}, "html": {"href": "https://bitbucket.org/%7B270d0b63-a1d7-403e-8182-194b6a4b9858%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/88d02700eb55edd7b28ba5daaa0b667ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsES-2.png"}}, "nickname": "esquires", "type": "user", "account_id": "557058:1c1602b2-fa4f-4119-891b-00bc657f423b"}, "updated_on": null, "type": "issue_comment", "id": 24492856}, {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24/comments/24517122.json"}, "html": {"href": "#!/osrf/swarm/issues/24#comment-24517122"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/swarm/issues/24.json"}}, "type": "issue", "id": 24, "repository": {"links": {"self": {"href": "data/repositories/osrf/swarm.json"}, "html": {"href": "#!/osrf/swarm"}, "avatar": {"href": "data/bytebucket.org/ravatar/{06a294a4-4254-4f63-b7b3-e5768577fb96}ts=default"}}, "type": "repository", "name": "swarm", "full_name": "osrf/swarm", "uuid": "{06a294a4-4254-4f63-b7b3-e5768577fb96}"}, "title": "elevation lookup offset"}, "content": {"raw": "I seem to get good registration between the terrain lookup function and the ground. I'm using this code\n\n```\n#!c++\n\n     this->MapQuery(lat, lon, elevation, terrainType);\n\n      ignition::math::Vector3d local = this->world->GetSphericalCoordinates()->LocalFromSpherical(ignition::math::Vector3d(lat, lon, 0));\n      local = this->world->GetSphericalCoordinates()->GlobalFromLocal(local);\n      local.Z(elevation - this->world->GetSphericalCoordinates()->GetElevationReference());\n```\n\nto calculate a single visualization point.\n\nA point in Gazebo's visualization frame is different from a point returned by MapQuery. \n\nI think you're trying to visualize GPS coordinates with respect to ground because your planes are flying into the ground. If this is the case, can you highlight a chunk of code that you think is causing the problem, or point me in the direction of trying out your problem use case?", "markup": "markdown", "html": "<p>I seem to get good registration between the terrain lookup function and the ground. I'm using this code</p>\n<div class=\"codehilite language-c++\"><pre><span></span>     <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">MapQuery</span><span class=\"p\">(</span><span class=\"n\">lat</span><span class=\"p\">,</span> <span class=\"n\">lon</span><span class=\"p\">,</span> <span class=\"n\">elevation</span><span class=\"p\">,</span> <span class=\"n\">terrainType</span><span class=\"p\">);</span>\n\n      <span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3d</span> <span class=\"n\">local</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">world</span><span class=\"o\">-&gt;</span><span class=\"n\">GetSphericalCoordinates</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">LocalFromSpherical</span><span class=\"p\">(</span><span class=\"n\">ignition</span><span class=\"o\">::</span><span class=\"n\">math</span><span class=\"o\">::</span><span class=\"n\">Vector3d</span><span class=\"p\">(</span><span class=\"n\">lat</span><span class=\"p\">,</span> <span class=\"n\">lon</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">));</span>\n      <span class=\"n\">local</span> <span class=\"o\">=</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">world</span><span class=\"o\">-&gt;</span><span class=\"n\">GetSphericalCoordinates</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">GlobalFromLocal</span><span class=\"p\">(</span><span class=\"n\">local</span><span class=\"p\">);</span>\n      <span class=\"n\">local</span><span class=\"p\">.</span><span class=\"n\">Z</span><span class=\"p\">(</span><span class=\"n\">elevation</span> <span class=\"o\">-</span> <span class=\"k\">this</span><span class=\"o\">-&gt;</span><span class=\"n\">world</span><span class=\"o\">-&gt;</span><span class=\"n\">GetSphericalCoordinates</span><span class=\"p\">()</span><span class=\"o\">-&gt;</span><span class=\"n\">GetElevationReference</span><span class=\"p\">());</span>\n</pre></div>\n\n\n<p>to calculate a single visualization point.</p>\n<p>A point in Gazebo's visualization frame is different from a point returned by MapQuery. </p>\n<p>I think you're trying to visualize GPS coordinates with respect to ground because your planes are flying into the ground. If this is the case, can you highlight a chunk of code that you think is causing the problem, or point me in the direction of trying out your problem use case?</p>", "type": "rendered"}, "created_on": "2016-01-06T15:52:16.419780+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 24517122}], "page": 1, "size": 9}